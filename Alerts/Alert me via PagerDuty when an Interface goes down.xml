<AlertDefinition xmlns="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Models" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><AlertID>116</AlertID><AlertMessage/><AlertRefID>fa6bbce4-bda4-4981-8c95-fbe2f8e22d14</AlertRefID><Canned>false</Canned><Category/><CreatedBy>admin</CreatedBy><CustomProperties xmlns:a="http://schemas.microsoft.com/2003/10/Serialization/Arrays"><a:KeyValueOfstringanyType><a:Key>ResponsibleTeam</a:Key><a:Value i:type="b:DBNull" xmlns:b="http://schemas.datacontract.org/2004/07/System"/></a:KeyValueOfstringanyType></CustomProperties><Description/><Enabled>true</Enabled><ExecutionTimePeriods xmlns:a="http://schemas.solarwinds.com/2008/Core"><a:TimePeriodSchedule><a:CronExpression>0 0 * * 1,2,3,4,5,6,0</a:CronExpression><a:CronExpressionTimeZoneInfoId/><a:DisplayName>Weekly - every Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday of every week</a:DisplayName><a:Duration>PT23H59M59S</a:Duration><a:EnabledDuringTimePeriod>true</a:EnabledDuringTimePeriod><a:EndTime i:nil="true"/><a:FrequencyId>0</a:FrequencyId><a:StartTime>1899-12-30T08:00:00Z</a:StartTime></a:TimePeriodSchedule></ExecutionTimePeriods><Frequency>PT15S</Frequency><LastEdit>2015-12-18T08:24:29.183Z</LastEdit><Name>Alert me via PagerDuty when an Interface goes down</Name><NotificationEnabled>false</NotificationEnabled><NotificationSettings xmlns:a="http://schemas.solarwinds.com/2008/Core"><a:Enabled>false</a:Enabled><a:NetObjectType>Interface</a:NetObjectType><a:Severity>Notice</a:Severity><a:Subject/><a:_properties xmlns:b="http://schemas.microsoft.com/2003/10/Serialization/Arrays"><b:KeyValueOfstringAlertNotificationProperty9sQWCBBt><b:Key>Name </b:Key><b:Value><a:Name>Name </a:Name><a:Value>${InterfaceName}</a:Value></b:Value></b:KeyValueOfstringAlertNotificationProperty9sQWCBBt><b:KeyValueOfstringAlertNotificationProperty9sQWCBBt><b:Key>Type Description </b:Key><b:Value><a:Name>Type Description </a:Name><a:Value>${InterfaceTypeDescription}</a:Value></b:Value></b:KeyValueOfstringAlertNotificationProperty9sQWCBBt><b:KeyValueOfstringAlertNotificationProperty9sQWCBBt><b:Key>Status </b:Key><b:Value><a:Name>Status </a:Name><a:Value>${Status}</a:Value></b:Value></b:KeyValueOfstringAlertNotificationProperty9sQWCBBt></a:_properties></NotificationSettings><ObjectType>Interface</ObjectType><Reset><Conditions><ConditionChainItem><AndThenTimeInterval i:nil="true"/><ChainType>ResetCustom</ChainType><Condition i:type="b:AlertConditionDynamic" xmlns:a="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Models.Alerting" xmlns:b="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Plugins.Conditions.Dynamic"><b:ExprTree><a:Child><a:Expr><a:Child><a:Expr><a:Child/><a:NodeType>Constant</a:NodeType><a:Value>True</a:Value></a:Expr><a:Expr><a:Child/><a:NodeType>Constant</a:NodeType><a:Value>0</a:Value></a:Expr><a:Expr><a:Child/><a:NodeType>Constant</a:NodeType><a:Value>0</a:Value></a:Expr></a:Child><a:NodeType>Event</a:NodeType><a:Value>[updateEvent].Orion.NPM.Interfaces|Status</a:Value></a:Expr><a:Expr><a:Child><a:Expr><a:Child/><a:NodeType>Field</a:NodeType><a:Value>Orion.NPM.Interfaces|Status</a:Value></a:Expr><a:Expr><a:Child/><a:NodeType>Constant</a:NodeType><a:Value>1</a:Value></a:Expr></a:Child><a:NodeType>Operator</a:NodeType><a:Value>=</a:Value></a:Expr></a:Child><a:NodeType>Operator</a:NodeType><a:Value>AND</a:Value></b:ExprTree><b:Scope i:nil="true"/><b:TimeWindow i:nil="true"/></Condition><ConjunctionOperator>None</ConjunctionOperator><IsInvertedMinCountThreshold>false</IsInvertedMinCountThreshold><NetObjectsMinCountThreshold i:nil="true"/><ObjectType>Interface</ObjectType><SustainTime i:nil="true"/><Type i:type="a:ConditionTypeDynamic" xmlns:a="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Plugins.Conditions.Dynamic"/></ConditionChainItem></Conditions></Reset><ResetActions xmlns:a="http://schemas.solarwinds.com/2008/Orion"><a:ActionDefinition><a:ActionProperties><a:ActionProperty><a:PropertyName>executionIfAknowledge</a:PropertyName><a:PropertyValue>False</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>executionRepeatTimeSpan</a:PropertyName><a:PropertyValue>0</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>FilePath</a:PropertyName><a:PropertyValue>C:\PagerDuty\Queue\${N=SwisEntity;M=Caption}_Recovery_${N=Generic;M=S}.txt</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>FileSizeMb</a:PropertyName><a:PropertyValue>0</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>Message</a:PropertyName><a:PropertyValue>{&#xD;
	"service_key": "${SQL: SELECT Nodes.PDIntegrationKey FROM Nodes WHERE NodeID='${NodeID}'}",&#xD;
	"incident_key": "${N=SwisEntity;M=Caption} (${N=SwisEntity;M=Node.DisplayName}) Down",&#xD;
	"event_type": "resolve",&#xD;
	"description": "Interface ${N=SwisEntity;M=Caption} on ${N=SwisEntity;M=Node.DisplayName} is ${N=SwisEntity;M=Status}"&#xD;
}</a:PropertyValue></a:ActionProperty></a:ActionProperties><a:ActionTypeID>WriteToFile</a:ActionTypeID><a:Description>Logs the Alert to a text file</a:Description><a:Enabled>true</a:Enabled><a:ID>262</a:ID><a:IconPath i:nil="true"/><a:Order>1</a:Order><a:TimePeriods xmlns:b="http://schemas.solarwinds.com/2008/Core"/><a:Title>Log Recovery to PagerDuty Queue</a:Title></a:ActionDefinition><a:ActionDefinition><a:ActionProperties><a:ActionProperty><a:PropertyName>Credentials</a:PropertyName><a:PropertyValue/></a:ActionProperty><a:ActionProperty><a:PropertyName>executionIfAknowledge</a:PropertyName><a:PropertyValue>False</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>executionRepeatTimeSpan</a:PropertyName><a:PropertyValue>0</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>FilePath</a:PropertyName><a:PropertyValue>"C:\PagerDuty\PagerDuty.vbs"</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>Interpreter</a:PropertyName><a:PropertyValue>CScript.exe</a:PropertyValue></a:ActionProperty></a:ActionProperties><a:ActionTypeID>ExecuteVBScript</a:ActionTypeID><a:Description>Execute a VB Script file when the Alert is Triggered or Reset</a:Description><a:Enabled>true</a:Enabled><a:ID>263</a:ID><a:IconPath i:nil="true"/><a:Order>2</a:Order><a:TimePeriods xmlns:b="http://schemas.solarwinds.com/2008/Core"/><a:Title>Execute PagerDuty VBScript</a:Title></a:ActionDefinition></ResetActions><Severity>Critical</Severity><Trigger><Conditions><ConditionChainItem><AndThenTimeInterval i:nil="true"/><ChainType>Trigger</ChainType><Condition i:type="b:AlertConditionDynamic" xmlns:a="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Models.Alerting" xmlns:b="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Plugins.Conditions.Dynamic"><b:ExprTree><a:Child><a:Expr><a:Child><a:Expr><a:Child/><a:NodeType>Constant</a:NodeType><a:Value>True</a:Value></a:Expr><a:Expr><a:Child/><a:NodeType>Constant</a:NodeType><a:Value>0</a:Value></a:Expr><a:Expr><a:Child/><a:NodeType>Constant</a:NodeType><a:Value>0</a:Value></a:Expr></a:Child><a:NodeType>Event</a:NodeType><a:Value>[updateEvent].Orion.NPM.Interfaces|Status</a:Value></a:Expr><a:Expr><a:Child><a:Expr><a:Child/><a:NodeType>Field</a:NodeType><a:Value>Orion.NPM.Interfaces|Status</a:Value></a:Expr><a:Expr><a:Child/><a:NodeType>Constant</a:NodeType><a:Value>2</a:Value></a:Expr></a:Child><a:NodeType>Operator</a:NodeType><a:Value>=</a:Value></a:Expr></a:Child><a:NodeType>Operator</a:NodeType><a:Value>AND</a:Value></b:ExprTree><b:Scope i:nil="true"/><b:TimeWindow i:nil="true"/></Condition><ConjunctionOperator>None</ConjunctionOperator><IsInvertedMinCountThreshold>false</IsInvertedMinCountThreshold><NetObjectsMinCountThreshold i:nil="true"/><ObjectType>Interface</ObjectType><SustainTime i:nil="true"/><Type i:type="a:ConditionTypeDynamic" xmlns:a="http://schemas.datacontract.org/2004/07/SolarWinds.Orion.Core.Alerting.Plugins.Conditions.Dynamic"/></ConditionChainItem></Conditions></Trigger><TriggerActions xmlns:a="http://schemas.solarwinds.com/2008/Orion"><a:ActionDefinition><a:ActionProperties><a:ActionProperty><a:PropertyName>EscalationLevel</a:PropertyName><a:PropertyValue>0</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>executionIfAknowledge</a:PropertyName><a:PropertyValue>True</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>executionRepeatTimeSpan</a:PropertyName><a:PropertyValue>0</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>FilePath</a:PropertyName><a:PropertyValue>C:\PagerDuty\Queue\${N=SwisEntity;M=Caption}_Down_${N=Generic;M=S}.txt</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>FileSizeMb</a:PropertyName><a:PropertyValue>0</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>Message</a:PropertyName><a:PropertyValue>{&#xD;
	"service_key": "${SQL: SELECT Nodes.PDIntegrationKey FROM Nodes WHERE NodeID='${NodeID}'}",&#xD;
	"incident_key": "${N=SwisEntity;M=Caption} (${N=SwisEntity;M=Node.DisplayName}) Down",&#xD;
	"event_type": "trigger",&#xD;
	"description": "Interface ${N=SwisEntity;M=Caption} on ${N=SwisEntity;M=Node.DisplayName} is ${N=SwisEntity;M=Status}",&#xD;
	"client": "SolarWinds",&#xD;
	"client_url": "${N=SwisEntity;M=Node.DetailsUrl}",&#xD;
	"details": {&#xD;
		"Interface": "${N=SwisEntity;M=Caption}",&#xD;
		"Node": "${N=SwisEntity;M=Node.DisplayName}",&#xD;
		"Status": "${N=SwisEntity;M=Status}"&#xD;
	}&#xD;
}</a:PropertyValue></a:ActionProperty></a:ActionProperties><a:ActionTypeID>WriteToFile</a:ActionTypeID><a:Description>Logs the Alert to a text file</a:Description><a:Enabled>true</a:Enabled><a:ID>264</a:ID><a:IconPath i:nil="true"/><a:Order>1</a:Order><a:TimePeriods xmlns:b="http://schemas.solarwinds.com/2008/Core"/><a:Title>Log Alert to PagerDuty Queue</a:Title></a:ActionDefinition><a:ActionDefinition><a:ActionProperties><a:ActionProperty><a:PropertyName>Credentials</a:PropertyName><a:PropertyValue/></a:ActionProperty><a:ActionProperty><a:PropertyName>EscalationLevel</a:PropertyName><a:PropertyValue>0</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>executionIfAknowledge</a:PropertyName><a:PropertyValue>True</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>executionRepeatTimeSpan</a:PropertyName><a:PropertyValue>0</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>FilePath</a:PropertyName><a:PropertyValue>"C:\PagerDuty\PagerDuty.vbs"</a:PropertyValue></a:ActionProperty><a:ActionProperty><a:PropertyName>Interpreter</a:PropertyName><a:PropertyValue>CScript.exe</a:PropertyValue></a:ActionProperty></a:ActionProperties><a:ActionTypeID>ExecuteVBScript</a:ActionTypeID><a:Description>Execute a VB Script file when the Alert is Triggered or Reset</a:Description><a:Enabled>true</a:Enabled><a:ID>265</a:ID><a:IconPath i:nil="true"/><a:Order>2</a:Order><a:TimePeriods xmlns:b="http://schemas.solarwinds.com/2008/Core"/><a:Title>Execute PagerDuty VBScript</a:Title></a:ActionDefinition></TriggerActions><Uri>swis://win2012r2./Orion/Orion.AlertConfigurations/AlertID=116</Uri></AlertDefinition>